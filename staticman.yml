# branch: "source"
# commitMessage: "Add Post with Staticman"
# moderation: true
# name: "Cinetimes"

# filename: "{@id}"
# path: "source/_drafts/{fields.title}"
# format: "yml"

# allowedFields: ["title", "author", "year", "img_name", "youtube_url", "vimeo_url", "webtorrent_magnet", "category", "tags", "synopsis"]
# requiredFields: ["title", "author", "year", "img_name", "category", "tags", "synopsis"]
# generatedFields:
#   someField: "some string" # Simple field (string)
#   date: # Extended field (date)
#     type: date
#     options:
#       format: "iso8601"

# allowedOrigins: ["localhost", "cinetimes.org"]

posts:
  allowedFields: ["title", "author", "synopsis", "poster_path", "backdrop_path", "tmdb_id", "genres", "release_date", "original_title", "youtube_url", "webtorrent_magnet", "vimeo_url", "archive_url", "other_url", "cast", "crew", "imdb_id", "adult"]
  allowedOrigins: ["localhost", "cinetimes.org"]
  # requiredFields: ["title", "body"]
  branch: "source"
  generatedFields:
    date:
      type: date
    slug:
      type: slugify
      options:
        field: title
  format: "yaml"
  moderation: true
  name: "Cinetimes"
  path: "source/_drafts"
  filename: "{fields.slug}"
  runtime: "{fields.runtime}"

  tmdb_id: "{fields.tmdb_id}"
  imdb_id: "{fields.imdb_id}"
  adult: "{fields.adult}"

  img_url: "{fields.backdrop_path}"
  poster_path: "{fields.poster_path}"

  title: "{fields.title}"
  release_date: "{fields.release_date}"
  original_title: "{fields.original_title}"
  transforms:
    synopsis: "frontmatterContent"

  cast: ["{fields.cast}"]
  crew: ["{fields.crew}"]
  genres: "{fields.genres}"
  category:
    - Films

  youtube_url: "{fields.youtube_url}"
  webtorrent_magnet: "{fields.webtorrent_magnet}"
  vimeo_url: "{fields.vimeo_url}"
  archive_url: "{fields.archive_url}"
  other_url: "{fields.other_url}"

# like:
#   allowedFields: ['like']
#   branch: "source"
#   format: "yml"
#   allowedOrigins: ["localhost", "cinetimes.org"]
#   moderation: false
#   path: "_data/likes/{options.slug}"
#   filename: "{@timestamp}{options.slug}"

comments:
  allowedFields: ["name", "email", "url", "message"]
  allowedOrigins: ["localhost", "cinetimes.org"]
  branch: "source"
  commitMessage: "New comment on his way"
  
  filename: "{options.slug}"
  # filename: "{@timestamp}"
  # "json", "yaml" or "frontmatter"
  format: "yaml"

  generatedFields:
    date:
      type: date
      options:
        format: "timestamp-seconds"

  moderation: true

  # Name of the site. Used in notification emails.
  name: "cinetimes.org"

  path: "_data/comments"
  # path: "_data/comments/{options.slug}"

  requiredFields: ["name", "email", "message"]

  transforms:
    email: md5